#import "OsxPlatformObjects.h"

@implementation OsxSurfaceTarget

- (id)initWithFrame:(NSRect)frame pixelFormat:(NSOpenGLPixelFormat*)pixelFormat
{
	self = [super initWithFrame:frame];
    
	if ( self )
	{
		_pixelFormat = [pixelFormat retain];
        
		if ( _pixelFormat == nil )
		{
			NSLog(@"nil pixel format cannot be used to initialize a CustomOpenGLView");
			[self release];
			return nil;
		}
        
		_openGLContext = [[NSOpenGLContext alloc] initWithFormat:_pixelFormat shareContext:nil];
        
		[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_globalFrameDidChangeNotification:) name:NSViewGlobalFrameDidChangeNotification object:self];
	}
    
	return self;
}

@end
